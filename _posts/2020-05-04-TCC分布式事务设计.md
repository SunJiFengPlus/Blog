---
layout:     post
title:      TCC 分布式事务设计
subtitle:   
date:       2020-05-04
author:     孙继峰
header-img: img/th2.jpg
catalog: true
tags:
    - TCC
    - 分布式事务
---

> 近期刚完成分布式事务相关的开发与对接, 想借此机会做一次复盘.

#### WHAT
TCC分布式事务是一种基于补偿的分步事务实现, 其主要流程如下图
[](image)

#### WHY
待我问问组长

#### HOW
首先需要一个事务管理器(TransactionManager)TM, 进行事务组的注册、调用事务单元的接口等功能.<br>
其次需要参与分布式事务的服务实现三个接口:<br>
- try: 预留资源
- confirm: 提交资源
- cancel: 回滚资源

其中 confirm 与 cancel 接口需要实现为幂等操作